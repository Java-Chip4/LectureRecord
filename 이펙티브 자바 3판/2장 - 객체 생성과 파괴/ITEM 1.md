# ITEM 1. 생성자 대신 정적 팩터리 메서드를 고려하라

생성자 대비 정적 팩터리 메서드가 가지는 장점을 위주로 다루는 아이템이다.   
정적 팩터리 메서드를 사용하는게 유리한 경우가 많으므로, 무작정 public 생성자만 만들던 습관이 있다면 고쳐보자!

## (생성자 대비) 정적 팩터리 메서드의 장점
## 장점 1. 이름을 가질 수 있다
```Car(String modelName, int modelYear) {}```  
위 처럼 선언되는 public 생성자는 이름을 가질 수 없다.
이름 뿐 아니라 반환 타입도 선언할 수 없다.  
따라서 여러 개의 생성자가 필요할 때 그들을 구분지을 수 있는 유일한 방법은 매개변수 목록을 다르게 하는 것 뿐이다.


```
Car(String modelName) {}
Car(String modelName, int modelYear) {}
Car(String modelName, int modelYear, String speed) {}
```
매개변수 목록을 다르게 해서 여러 개의 생성자를 선언한 모습  
위 상황에서 하나의 매개변수 목록으로 다른 일을 하는 생성자를 여러 개 만들고 싶을 수도 있다. 이런 경우를 깔끔하게 해결하기는 쉽지 않으며, 그나마 매개변수 순서를 바꾸는 방법 밖에 없다.

```  
Car(String modelName, int modelYear) {}
Car(int modelYear, String modelName) {}
```
modelName, modelYear 을 가지는 생성자를 여러 개 만든 모습이다.  
이 방식은 클라이언트 입장에서 매개변수를 넣을 때 혼란을 초래한다.(실수 유발하기 쉬움)


정적 팩토리 메서드는 이름을 다르게 조금 다르게 붙여주는 것으로 이 문제를 극복할 수 있다.  
심지어 이름을 잘 지으면 정확히 어떤 객체를 생성하는 것인지 더 잘 표현된다.    
이름을 가질 수 있다는 건 정적 팩터리 메서드의 장점이다.

<br>

## 장점 2. 호출 될 때마다 인스턴스를 새로 생성하지 않아도 된다.

스터디에서 싱글턴 메서드에 대해 공부했을 때 얻은 내용과 비슷한 맥락이다.    
생성자와 달리, 정적 팩터리 메서드는 호출 될 때마다 꼭 new를 해줄 필요가 없다.    
메서드 로직에 따라 기존에 있는 객체를 반환해 줄 수도 있고, 객체를 만들지 않고 정적인 자원을 넘겨줄 수도 있다.
물론 새로운 객체를 생성하여 반환해 줄 수도 있다.  
책에 있는 Boolean 클래스의 예시도 그런 경우에 속한다.

<br>

## 장점 3, 4. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다, 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다


두 장점이 같은 맥락이라 함께 다룬다.

### 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다

```ex) Car(String modelName, int modelYear) {}```  
생성자 메서드는 클래스 자신의 객체 밖에 반환할 수 없다.
선언할 때 반환값을 따로 명시하지 않고, 암시적으로 클래스 자신의 객체를 반환하고록 고정되어 있기 때문이다.


반면 정적 팩토리 메서드는 반환 타입의 하위 타입 객체는 모두 반환할 수 있다.  
메서드 반환 타입으로 지정한 클래스 자신과 그 자식 모두를 반환할 수 있기 때문이다.  
이 덕분에 정적 팩토리 메서드를 사용하는 것 만으로도 다형성을 이용할 수 있게 된다.  
이제 객체를 요청하는 클라이언트는 실제 건네받는 구현 클래스가 무엇인지 몰라도 된다.
반환 타입의 하위 타입이라는 것만 안다.   
이러면 클라이언트 코드의 변화 없이도, API 제작자가 자신의 코드를 업데이트 할 수 있는 등 소프트웨어 설계 상의 이점이 생긴다.



### 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다

위 원리를 이용하면, 정적 팩터리 메서드에 들어오는 매개변수에 따라 매번 다른 객체를 반환할 수도 있다.  
대표적인 예시는 자바 API의 EnumSet클래스이다.
EnumSet 클래스는 public 생성자가 없다.
대신 정적 팩터리 메서드 내부 로직을 통해 매개변수로 들어 온 원소의 수가 64개 이하면 long변수 하나로 관리하는 RegularEnumSet 인스턴스를, 65개 이상이면 long 배열로 관리하는 JumboEnumSet의 인스턴스를 반환한다.  
다형성 덕분에 매개변수 값에 따라 적절한 자식 객체를 반환할 수 있다는 점도 기존에 없던 장점이다.

<br>

## 장점 5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다

일단 클래스 자신을 반환형으로 두면, 반환할 자식 클래스를 미리 만들어 두지 않았더라도 상황에 따라 나중에 만들어서 반환할 수 있게 된다.    
이 유연함은 서비스 제공자 프레임워크(service provider framework)를 만드는 근간이 된다고 한다.